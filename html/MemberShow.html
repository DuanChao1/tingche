<html><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="x5-fullscreen" content="true">
    <meta name="full-screen" content="yes">
    <title></title>
    <link href="/Content/Css/reset.css" rel="stylesheet" type="text/css">
    <link href="/Content/Css/index.css" rel="stylesheet" type="text/css">
    <script src="/Content/Js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <style type="text/css">
        .inputCard>div>div>div{
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        .noScroll{
            display: block;
            height: 100%;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <app>
        

<link href="/Content/Css/membershow.css" rel="stylesheet" type="text/css">

<header>
    <a href="javascript:history.go(-1);"><span class="return"></span></a>
    <p>¸öÈË×ÊÁÏ</p>
</header>
<section class="inputCard">
    <div>
        <label class="onLabel" for="name"><a class="w2">ÐÕÃû</a></label>
        <input id="txtMemberName" type="text" value="ºúº£">
    </div>
    <div>
        <label class="onLabel"><a>ÊÕ¼þµØÖ·</a></label>
        <input id="txtMemberAddress" type="text" value="ÄÏ·¨ÐÅ½ð¹Ø±±¶þÂ·">
    </div>
</section>
<section class="inputCard">
    <div>
        <label class="onLabel"><a>Ö¤¼þÀàÐÍ</a></label>
        <label><input name="rbCard" type="radio" checked="checked" value="0">Éí·ÝÖ¤ </label>
        <label><input name="rbCard" type="radio" value="1">¾ü¹ÙÖ¤ </label>
        <label><input name="rbCard" type="radio" value="2">»¤ÕÕ </label>
    </div>
    <div>
        <label class="onLabel" for="id"><a>Ö¤¼þºÅÂë</a></label>
        <input id="txtIDCard" type="text" value="420203198008062594">
    </div>
</section>
<section class="inputCard last">
    <div>
        <label class="onLabel"><a class="w3">³µÅÆºÅ</a></label>
        <div>
            <div onclick="showTip(0)"></div>
            <input class="min" id="txtFirstCode" type="text" placeholder="¾©">
            <span class="arrow-bottom"></span>
        </div>
        <div>
            <input class="min" id="txtOnePlateNumber" type="text">
        </div>
    </div>
    <div>
        <label class="onLabel"></label>
        <div>
            <div onclick="showTip(1)"></div>
            <input class="min" id="txtSecondCode" type="text" placeholder="¾©">
            <span class="arrow-bottom"></span>
        </div>
        <div>
            <input class="min" id="txtTwoPlateNumber" type="text">
        </div>
    </div>

</section>
<div class="bg">
    <div class="bindBtn"><a onclick="doMemberUpdate();" href="javascript:void(0)">È·¶¨</a></div>
</div>

<div class="tipBox" style="display: none;" onclick="hideTip(0)">
    <div class="tipDiv">
        <div>
            <label><input name="plate" onclick="doSetNull('0')" type="radio" checked="" value="">È¡Ïû</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¾©');" type="radio" checked="" value="¾©">¾©</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '½ò')" type="radio" value="½ò">½ò</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '»¦')" type="radio" value="»¦">»¦</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Óå')" type="radio" value="Óå">Óå</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¼½')" type="radio" value="¼½">¼½</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Ô¥')" type="radio" value="Ô¥">Ô¥</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÔÆ')" type="radio" value="ÔÆ">ÔÆ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÁÉ')" type="radio" value="ÁÉ">ÁÉ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ºÚ')" type="radio" value="ºÚ">ºÚ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Ïæ')" type="radio" value="Ïæ">Ïæ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Íî')" type="radio" value="Íî">Íî</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Â³')" type="radio" value="Â³">Â³</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÐÂ')" type="radio" value="ÐÂ">ÐÂ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ËÕ')" type="radio" value="ËÕ">ËÕ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Õã')" type="radio" value="Õã">Õã</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¸Ó')" type="radio" value="¸Ó">¸Ó</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¶õ')" type="radio" value="¶õ">¶õ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¹ð')" type="radio" value="¹ð">¹ð</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¸Ê')" type="radio" value="¸Ê">¸Ê</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '½ú')" type="radio" value="½ú">½ú</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÃÉ')" type="radio" value="ÃÉ">ÃÉ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÉÂ')" type="radio" value="ÉÂ">ÉÂ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¼ª')" type="radio" value="¼ª">¼ª</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Ãö')" type="radio" value="Ãö">Ãö</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '¹ó')" type="radio" value="¹ó">¹ó</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'ÔÁ')" type="radio" value="ÔÁ">ÔÁ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Çà')" type="radio" value="Çà">Çà</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '²Ø')" type="radio" value="²Ø">²Ø</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', '´¨')" type="radio" value="´¨">´¨</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Äþ')" type="radio" value="Äþ">Äþ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('0', 'Çí')" type="radio" value="Çí">Çí</label>
        </div>
    </div>
</div>

<div class="tipBox" style="display: none;" onclick="hideTip(1)">
    <div class="tipDiv">
        <div>
            <label><input name="plate" onclick="doSetNull('1')" type="radio" checked="" value="">È¡Ïû</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1','¾©')" type="radio" checked="" value="¾©">¾©</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '½ò')" type="radio" value="½ò">½ò</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '»¦')" type="radio" value="»¦">»¦</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Óå')" type="radio" value="Óå">Óå</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¼½')" type="radio" value="¼½">¼½</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Ô¥')" type="radio" value="Ô¥">Ô¥</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÔÆ')" type="radio" value="ÔÆ">ÔÆ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÁÉ')" type="radio" value="ÁÉ">ÁÉ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ºÚ')" type="radio" value="ºÚ">ºÚ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Ïæ')" type="radio" value="Ïæ">Ïæ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Íî')" type="radio" value="Íî">Íî</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Â³')" type="radio" value="Â³">Â³</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÐÂ')" type="radio" value="ÐÂ">ÐÂ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ËÕ')" type="radio" value="ËÕ">ËÕ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Õã')" type="radio" value="Õã">Õã</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¸Ó')" type="radio" value="¸Ó">¸Ó</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¶õ')" type="radio" value="¶õ">¶õ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¹ð')" type="radio" value="¹ð">¹ð</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¸Ê')" type="radio" value="¸Ê">¸Ê</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '½ú')" type="radio" value="½ú">½ú</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÃÉ')" type="radio" value="ÃÉ">ÃÉ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÉÂ')" type="radio" value="ÉÂ">ÉÂ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¼ª')" type="radio" value="¼ª">¼ª</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Ãö')" type="radio" value="Ãö">Ãö</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '¹ó')" type="radio" value="¹ó">¹ó</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'ÔÁ')" type="radio" value="ÔÁ">ÔÁ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Çà')" type="radio" value="Çà">Çà</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '²Ø')" type="radio" value="²Ø">²Ø</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', '´¨')" type="radio" value="´¨">´¨</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Äþ')" type="radio" value="Äþ">Äþ</label>
        </div>
        <div>
            <label><input name="plate" onclick="doSetFirstCode('1', 'Çí')" type="radio" value="Çí">Çí</label>
        </div>
    </div>
</div>

<!--³É¹¦ÌáÊ¾¿ò-->
<div class="tip" id="successTip" style="display: none;">
    <div class="mask"></div>
    <div class="tip_content">
        <span class="ico success"></span>
        <span id="successMessage"></span>
        <div>
            <span><a onclick="doCancel('success');" href="javascript:void(0)">È·¶¨</a></span>
        </div>
    </div>
</div>

<!--Ê§°ÜÌáÊ¾¿ò-->
<div class="tip" id="errorTip" style="display: none;">
    <div class="mask"></div>
    <div class="tip_content">
        <span class="ico error"></span>
        <span id="errorMessage"></span>
        <div>
            <span><a onclick="doCancel('error');" href="javascript:void(0)">È·¶¨</a></span>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {

        var certificateType = "0";
        $("input:radio[value='" + certificateType + "']").attr('checked', 'true');
        
        
        var plateNumber1 = "¾©A88888";

        //alert(plateNumber1);

        var first = plateNumber1.substring(0, 1);
        $("#txtFirstCode").val(first);
        $("input[value*='" + first + "']").prop("checked", true);

        var allNumber1 = plateNumber1.substring(1);
        $("#txtOnePlateNumber").val(allNumber1);


        var plateNumber2 = "¾©A065ZA";

        //alert(plateNumber2);

        var second = plateNumber2.substring(0, 1);
        $("#txtSecondCode").val(second);
        $("input[value*='" + second + "']").prop("checked", true);

        var allNumber2 = plateNumber2.substring(1);
        $("#txtTwoPlateNumber").val(allNumber2);
    })


    function showTip(code) {
        var tip = document.getElementsByClassName('tipBox')
        for (var i = 0; i < tip.length; i++) {
            if (i == code) {
                tip[i].style.display = 'block'
                $('app:first').addClass("noScroll")
            } else {
                tip[i].style.display = 'none'
            }
        }
    }

    function hideTip(code) {
        var tip = document.getElementsByClassName('tipBox')
        tip[code].style.display = 'none'
        $('app:first').removeClass("noScroll");
    }

    function doSetFirstCode(type, city) {
        
        if (type == "0")
        {
            $("#txtFirstCode").val($("input[value*='" + city + "']").val());
        }
        else
        {
            $("#txtSecondCode").val($("input[value*='" + city + "']").val());
        }
    }

    function doSetNull(type) {

        if (type == "0") {
            $("#txtFirstCode").val("");
        }
        else {
            $("#txtSecondCode").val("");
        }

    }


    function doMemberUpdate() {

        if ($("#txtMemberName").val() == "") {
            doDialog("error", "ÐÕÃû²»ÄÜÎª¿Õ£¡");
            return;
        }

        if ($("#txtMemberName").val().length > 30) {
            doDialog("error", "ÓÃ»§Ãû³Æ³¤¶È²»ÄÜ³¬¹ý30¸ö×Ö·û£¡");
            return;
        }

        if ($("#txtMemberAddress").val() == "") {
            doDialog("error", "ÁªÏµµØÖ·²»ÄÜÎª¿Õ£¡");
            return;
        }

        if ($("#txtMemberAddress").val().length > 100) {
            doDialog("error", "ÁªÏµµØÖ·³¤¶È²»ÄÜ³¬¹ý100¸ö×Ö·û£¡");
            return;
        }

        if ($("#txtIDCard").val() == "") {
            doDialog("error", "Ö¤¼þºÅ²»ÄÜÎª¿Õ£¡");
            return;
        }

        var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        if (reg.test($("#txtIDCard").val()) === false)
        {
            doDialog("error", "Ö¤¼þºÅ´íÎó£¡");
            return;
        }

        if ($("#txtFirstCode").val() == "") {
            if ($("#txtOnePlateNumber").val() == "") {
                doDialog("error", "µÚÒ»³µÅÆºÅ±ØÌî£¡");
                return;
            }
        }

        if ($("#txtOnePlateNumber").val() != "")
        {
            if ($("#txtOnePlateNumber").val().length != 6) {
                doDialog("error", "µÚÒ»³µÅÆºÅ²»ÕýÈ·£¡");
                return;
            }
        }

        if ($("#txtSecondCode").val() != "") {
            if ($("#txtTwoPlateNumber").val() == "") {
                doDialog("error", "µÚ¶þ³µÅÆºÅ±ØÌî£¡");
                return;
            }
        }
        
        if ($("#txtTwoPlateNumber").val() != "") {
            if ($("#txtTwoPlateNumber").val().length != 6) {
                doDialog("error", "µÚ¶þ³µÅÆºÅ²»ÕýÈ·£¡");
                return;
            }
        }

        var codeType = $("input[name='rbCard']:checked").val();
        
        var onePlateNumber = $("#txtFirstCode").val() + $("#txtOnePlateNumber").val();
        var twoPlateNumber = $("#txtSecondCode").val() + $("#txtTwoPlateNumber").val();

        var memberAddress = $("#txtMemberAddress").val();
        
        $.ajax({
            url: "/Member/MemberUpdate?memberName=" + encodeURI($("#txtMemberName").val()) + "&memberAddress=" + encodeURI($("#txtMemberAddress").val()) + + "&memberCodeType=" + codeType + "&memberIDCode=" + $("#txtIDCard").val() + "&memberPlateNumber1=" + encodeURI(onePlateNumber) + "&memberPlateNumber2=" + encodeURI(twoPlateNumber) + "&rnd=" + Math.random() * 10,
            type: "post",
            dataType: "json",
            success: function (data) {
                if (data.Result == "200") {
                    doDialog("success", "ÐÞ¸Ä³É¹¦£¡"); 
                }
                else if (data.Result == "201") {
                    doDialog("error", "Î´ÊÕµ½µÇÂ¼ÇëÇóÊý¾Ý£¡");
                }
                else if (data.Result == "202") {
                    doDialog("error", "ÄúµÄÕÊºÅ±»Ëø¶¨»ò×¢Ïú£¬ÎÞ·¨µÇÂ¼£¡");
                }
                else if (data.Result == "203") {
                    doDialog("error", "ÄúÊäÈëµÄÊÖ»úºÅÓÐÎó»òÎ´×¢²á£¬ÎÞ·¨µÇÂ¼£¡");
                }
                else {
                    doDialog("error", "²Ù×÷Òì³££¬Çë¼ì²é£¡");
                }
            }
        })

    }

    function doDialog(type, message) {
        if (type == "success") {
            $("#successMessage").html(message);
            $("#successTip").show();
        }
        else {
            $("#errorMessage").html(message);
            $("#errorTip").show();
        }
    }

    function doCancel(type) {
        if (type == "success") {
            $("#successTip").hide();
            window.location.href = "/Member/Main?" + Math.random() * 10;
        }
        else {
            $("#errorTip").hide();
        }
    }

</script>
    </app>

<!-- Visual Studio Browser Link -->
<script id="__browserLink_initializationData" type="application/json">
    {"appName":"Internet Explorer","requestId":"4c8d1b30264b4d59b6fe4761f2e6e955"}
</script>
<script src="http://localhost:51461/8f979ef925fb4625a5f87db9649639c0/browserLink" type="text/javascript" async="async"></script>
<!-- End Browser Link -->



</body></html>